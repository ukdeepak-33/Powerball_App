{% extends "base.html" %}

{% block title %}Simulate Multiple Draws{% endblock %}

{% block page_heading %}Simulate Multiple Draws{% endblock %}

{% block content %}
<div class="space-y-8">
    <div class="card p-6 bg-white rounded-lg shadow-lg">
        <h2 class="text-2xl font-bold mb-4 text-gray-800">Simulate Powerball Draws & See Frequency</h2>
        <form method="POST" action="{{ url_for('simulate_multiple_draws_route') }}" class="space-y-4">
            <div>
                <label for="num_draws" class="block text-sm font-medium text-gray-700 mb-1">Number of Simulations:</label>
                <input type="number" id="num_draws" name="num_draws" min="100" value="{{ num_simulations if num_simulations else 1000 }}" 
                       class="mt-1 block w-full md:w-1/3 p-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                       placeholder="e.g., 1000" required>
                <p class="mt-1 text-xs text-gray-500">More simulations provide a more accurate frequency distribution.</p>
            </div>
            <button type="submit" class="btn-primary">
                Run Simulation
            </button>
        </form>
    </div>

    {% if simulated_freq %}
    <div class="card p-6 bg-white rounded-lg shadow-lg">
        <h2 class="text-2xl font-bold mb-4 text-gray-800">Frequency Distribution of Simulated Numbers ({{ num_simulations }} Draws)</h2>
        <div class="overflow-x-auto max-h-96 custom-scrollbar"> {# Added max-h-96 and custom-scrollbar for vertical scrolling #}
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 py-2">
                {% for item in simulated_freq %}
                    <div class="ball-lg flex flex-col items-center justify-center 
                                {% if item.Number <= 26 %}powerball-lg{% endif %}">
                        <span class="text-xl font-bold {% if item.Number <= 26 %}text-white{% else %}text-gray-900{% endif %}">
                            {{ item.Number }}
                        </span>
                        <span class="text-xs {% if item.Number <= 26 %}text-red-100{% else %}text-gray-600{% endif %}">
                            ({{ item.Frequency }}x)
                        </span>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% elif request.method == 'POST' %}
    <div class="card p-6 bg-white rounded-lg shadow-lg">
        <p class="text-gray-500">No numbers were generated or found in the simulation. Please try again or check your data.</p>
    </div>
    {% endif %}
</div>

{# Custom Styles for larger balls #}
<style>
    .ball-lg {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 60px; /* Larger size */
        height: 60px; /* Larger size */
        background-color: #e2e8f0; /* Light blue-gray for white balls */
        border-radius: 50%;
        border: 1px solid #cbd5e0;
        font-weight: bold;
        margin: 5px; /* Adjust margin for spacing */
        flex-shrink: 0;
        box-shadow: 0 2px 5px rgba(0,0,0,0.15);
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .ball-lg:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .powerball-lg {
        background-color: #dc2626; /* Stronger red for Powerball */
        border-color: #991b1b;
    }

    /* Custom scrollbar for better aesthetics */
    .custom-scrollbar::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 10px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: #555;
    }
</style>
{% endblock %}

{% block scripts %}
    {# Removing the Chart.js script as we are now displaying results in a list/grid format #}
{% endblock %}
