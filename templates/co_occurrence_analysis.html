{% extends "base.html" %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">Co-occurrence Analysis (Heatmap)</h1>

<p class="mb-4 text-gray-700">This heatmap visualizes how often pairs of white balls have been drawn together. Darker colors indicate higher co-occurrence frequencies.</p>

<div class="chart-container">
    <h2 class="text-xl font-semibold mb-4">White Ball Co-occurrence</h2>
    <div id="coOccurrenceHeatmap"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Ensure data is an empty array if not provided or empty
        var coOccurrenceData = {% if co_occurrence_data %}{{ co_occurrence_data | tojson }}{% else %}[]{% endif %};
        var maxCoOccurrence = {% if max_co_occurrence %}{{ max_co_occurrence }}{% else %}0{% endif %};
        
        console.log("[D3 Debug] co_occurrence_analysis.html - coOccurrenceData:", coOccurrenceData);
        console.log("[D3 Debug] co_occurrence_analysis.html - maxCoOccurrence:", maxCoOccurrence);

        drawHeatmap(coOccurrenceData, "coOccurrenceHeatmap", "x", "y", "count", "White Ball Co-occurrence Heatmap", "Ball 1", "Ball 2", maxCoOccurrence);
    });
</script>
{% endblock %}
