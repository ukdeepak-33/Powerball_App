{% extends "base.html" %}

{% block title %}Grouped Number Patterns Analysis{% endblock %}

{% block page_heading %}Grouped Number Patterns Analysis{% endblock %}

{% block content %}
<div class="card p-6 bg-white rounded-lg shadow-lg mb-8">
    <h2 class="text-2xl font-bold mb-4 text-gray-800">Overview of Grouped Patterns</h2>
    <p class="text-gray-700 mb-4">
        This analysis identifies how often specific pairs (two numbers) and triplets (three numbers) appear together
        within predefined numerical ranges (e.g., 10s, 30s, 60s) for each year in the historical data.
        This can reveal popular combinations within certain number "decades".
    </p>
    <p class="text-gray-700">
        The ranges are defined as: 1-9, 10-19, 20-29, 30-39, 40-49, 50-59, 60-69.
        Results are sorted by their overall frequency, from most to least frequent.
    </p>
</div>

<div class="card p-6 bg-white rounded-lg shadow-lg">
    <h2 class="text-2xl font-bold mb-4 text-gray-800">Most Frequent Patterns by Year and Range</h2>
    {% if patterns_data %}
        <div class="overflow-x-auto">
            <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-md">
                <thead class="bg-gray-100">
                    <tr>
                        <th class="px-4 py-2 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider">Year</th>
                        <th class="px-4 py-2 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider">Range</th>
                        <th class="px-4 py-2 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider">Type</th>
                        <th class="px-4 py-2 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider">Pattern</th>
                        <th class="px-4 py-2 border-b-2 border-gray-200 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider">Count</th>
                    </tr>
                </thead>
                <tbody>
                    {% for pattern in patterns_data %}
                    <tr class="hover:bg-gray-50">
                        <td class="px-4 py-2 border-b border-gray-200 text-sm text-gray-900">{{ pattern.year }}</td>
                        <td class="px-4 py-2 border-b border-gray-200 text-sm text-gray-900">{{ pattern.range }}</td>
                        <td class="px-4 py-2 border-b border-gray-200 text-sm text-gray-900">{{ pattern.type }}</td>
                        <td class="px-4 py-2 border-b border-gray-200 text-sm text-gray-900">
                            <div class="flex space-x-1">
                                {% for num in pattern.pattern %}
                                    <span class="inline-flex justify-center items-center w-8 h-8 bg-gray-200 rounded-full font-bold text-gray-700 text-sm">
                                        {{ num }}
                                    </span>
                                {% endfor %}
                            </div>
                        </td>
                        <td class="px-4 py-2 border-b border-gray-200 text-sm text-gray-900 font-bold">{{ pattern.count }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-800">
            No grouped pattern data available. Please ensure historical data is loaded.
        </div>
    {% endif %}
</div>
{% endblock %}
